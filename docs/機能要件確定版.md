# BUDDICA CRM 機能要件 確定版

## 必要機能の整理（優先度付き）

### Phase 1: MVP必須機能

#### 1. チーム連携機能【必須】
- **他スタッフへの引き継ぎ**
  - 案件ステータスの可視化
  - 引き継ぎメモ機能
  - 担当者変更履歴
  
- **店舗間の情報共有**
  - 複数店舗での顧客情報参照
  - 他店舗での対応履歴確認
  - 店舗横断での重複防止

- **誰が対応してもわかる仕組み**
  - 顧客情報の標準化
  - 商談履歴の詳細記録
  - 対応ガイドライン表示

#### 2. 在庫管理連携【必須】
- **複数店舗の在庫確認**
  - 全店舗在庫のリアルタイム検索
  - 店舗間移動の可能性表示
  - 他店舗への問い合わせ機能

#### 3. 承認フロー【必須】
- **店長承認フロー**
  - 特別価格の承認申請
  - 大幅値引きの承認ワークフロー
  - 承認状況の可視化

#### 4. アフターサービス【必須】
- **車検・点検の案内**
  - 車検時期の自動アラート
  - 点検案内の自動送信
  - リピート機会の創出

#### 5. 顧客からの能動的アクション【必須】
- **LINEでの質問対応**
  - 24時間受付
  - 自動応答＋有人対応
  - 履歴の自動記録

- **オンライン予約**
  - 来店予約システム
  - スタッフ指名機能
  - 予約確認・変更

- **見積もり変更依頼**
  - オンラインでの条件変更
  - 再見積もり自動生成
  - 変更履歴の管理

### Phase 2: 拡張機能

#### 1. 高度な分析機能
- **営業効率分析**
  - スタッフ別成約率
  - 商談期間分析
  - 活動量と成果の相関

- **店舗比較分析**
  - 店舗別パフォーマンス
  - ベストプラクティス共有
  - 改善ポイント特定

#### 2. 自動化機能
- **フォローアップ自動化**
  - タイミング最適化
  - パーソナライズメッセージ
  - 効果測定

### Phase 3: 将来拡張（現時点では不要）

#### 除外機能
- ❌ 在庫の仮押さえ機能
- ❌ 入庫予定の案内
- ❌ 期間限定価格の設定
- ❌ 特典の自動適用
- ❌ 納車スケジュール管理
- ❌ 整備予約システム

## データモデル更新

### 1. チーム連携対応
```sql
-- スタッフテーブル
staff:
  staff_id (Primary Key)
  name
  store_id
  role (advisor/manager/admin)
  active_status

-- 担当履歴テーブル
assignment_history:
  assignment_id (Primary Key)
  customer_id (Foreign Key)
  staff_id (Foreign Key)
  start_date
  end_date
  handover_notes
  reason
```

### 2. 店舗間連携
```sql
-- 店舗テーブル
stores:
  store_id (Primary Key)
  store_name
  location
  contact_info

-- 店舗間問い合わせテーブル
inter_store_inquiries:
  inquiry_id (Primary Key)
  from_store_id
  to_store_id
  customer_id
  vehicle_inquiry
  status
  response
```

### 3. 承認フロー
```sql
-- 承認申請テーブル
approval_requests:
  request_id (Primary Key)
  customer_id (Foreign Key)
  staff_id (Foreign Key)
  request_type (discount/price/special)
  amount
  reason
  status (pending/approved/rejected)
  approver_id
  approved_date
```

### 4. 顧客アクション
```sql
-- オンライン予約テーブル
online_reservations:
  reservation_id (Primary Key)
  customer_id (Foreign Key)
  preferred_staff_id
  preferred_datetime
  purpose
  status
  created_via (line/web/phone)

-- 顧客問い合わせテーブル
customer_inquiries:
  inquiry_id (Primary Key)
  customer_id (Foreign Key)
  channel (line/email/phone)
  inquiry_type
  content
  response_status
  assigned_staff_id
```

## 物語の更新版シナリオ

### チーム連携シーン
```
田中が突然の体調不良で休み
→ 山田（同僚）が代理対応
→ CRMで田中の担当顧客を確認
→ 「田中の代理で対応します。状況は把握しております」
→ 引き継ぎメモに基づいて適切な提案
→ 顧客満足度を維持
```

### 店舗間連携シーン
```
顧客: 「A店で見た車、こちらにもありますか？」
→ CRMで全店舗在庫を検索
→ 「B店にございます。取り寄せ可能です」
→ 店舗間問い合わせを送信
→ リアルタイムで回答取得
→ 「明日には移動完了予定です」
```

### 承認フローシーン
```
顧客: 「他店では10万円安かった」
→ 田中: 「確認いたします」
→ CRMで値引き承認申請
→ 店長のスマホに通知
→ 店長: 承認ボタンをタップ
→ 田中: 「店長の承認が下りました。同額で対応可能です」
```

### 顧客能動アクションシーン
```
[LINE]
顧客: 「見積もりの色を白から黒に変更できますか？」
→ CRM自動判定: 見積もり変更依頼
→ 担当者に通知
→ 1分で見積もり再作成
→ LINE自動返信: 「変更見積もりをお送りしました」
→ 顧客満足度向上
```

## 実装優先度の再整理

### Phase 1（2週間）: チーム機能基盤
1. スタッフ管理・権限設定
2. 基本的な引き継ぎ機能
3. 店舗間在庫参照
4. シンプルな承認フロー

### Phase 2（4週間）: 顧客接点強化
1. LINE連携・問い合わせ対応
2. オンライン予約システム
3. 見積もり変更機能
4. 車検案内自動化

### Phase 3（6週間以降）: 分析・最適化
1. 高度な分析ダッシュボード
2. 自動化ルールエンジン
3. AI活用機能
4. パフォーマンス最適化

## KPI設定

### チーム連携効果
- 担当者不在時の対応率: 95%以上
- 引き継ぎ後の顧客満足度: 90%以上
- 店舗間協力による成約率: 15%向上

### 顧客能動アクション効果
- LINE問い合わせ応答時間: 30分以内
- オンライン予約率: 30%
- 見積もり変更対応時間: 10分以内